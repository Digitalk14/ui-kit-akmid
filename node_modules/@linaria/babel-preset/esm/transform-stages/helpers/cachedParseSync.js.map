{"version":3,"file":"cachedParseSync.js","names":["cache","WeakMap","cachedParseSync","babel","code","babelOptions","fileCache","get","Map","has","file","parseSync","set"],"sources":["../../../src/transform-stages/helpers/cachedParseSync.ts"],"sourcesContent":["import type { ParseResult, TransformOptions } from '@babel/core';\n\nimport type { Core } from '../../babel';\n\nconst cache = new WeakMap<\n  Partial<TransformOptions>,\n  Map<string, ParseResult>\n>();\n\nexport default function cachedParseSync(\n  babel: Core,\n  code: string,\n  babelOptions: TransformOptions\n): ParseResult {\n  const fileCache = cache.get(babelOptions) ?? new Map<string, ParseResult>();\n  if (fileCache.has(code)) {\n    return fileCache.get(code)!;\n  }\n\n  const file = babel.parseSync(code, babelOptions)!;\n\n  fileCache.set(code, file);\n  cache.set(babelOptions, fileCache);\n\n  return file;\n}\n"],"mappings":"AAIA,MAAMA,KAAK,GAAG,IAAIC,OAAJ,EAAd;AAKA,eAAe,SAASC,eAAT,CACbC,KADa,EAEbC,IAFa,EAGbC,YAHa,EAIA;EACb,MAAMC,SAAS,GAAGN,KAAK,CAACO,GAAN,CAAUF,YAAV,KAA2B,IAAIG,GAAJ,EAA7C;;EACA,IAAIF,SAAS,CAACG,GAAV,CAAcL,IAAd,CAAJ,EAAyB;IACvB,OAAOE,SAAS,CAACC,GAAV,CAAcH,IAAd,CAAP;EACD;;EAED,MAAMM,IAAI,GAAGP,KAAK,CAACQ,SAAN,CAAgBP,IAAhB,EAAsBC,YAAtB,CAAb;EAEAC,SAAS,CAACM,GAAV,CAAcR,IAAd,EAAoBM,IAApB;EACAV,KAAK,CAACY,GAAN,CAAUP,YAAV,EAAwBC,SAAxB;EAEA,OAAOI,IAAP;AACD"}